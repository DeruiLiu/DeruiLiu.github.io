---
layout:     post
title:      c++知识问题积累
subtitle:   C++面试问题积累
date:       2020-10-14
author:     DR
header-img: img/IMG_4158.jpg
catalog: true
tags:
    - C++
---

## 1. 构造函数为什么不能是虚函数
1. 构造一个对象的时候，必须知道对象的实际类型，而虚函数行为是在运行期间确定实际类型的。而在构造一个对象时，由于对象还未构造成功。编译器无法知道对象的实际类型，是该类本身，还是该类的一个派生类，或是更深层次的派生类。无法确定。
2. 虚函数的执行依赖于虚函数表。而虚函数表在构造函数中进行初始化工作，即初始化vptr，让他指向正确的虚函数表。而在构造对象期间，虚函数表还没有被初始化，将无法进行

## 2. 为什么要使用纯析构函数
使用虚析构函数的类一般是要作为基类，被其他类继承。通过把基类的析构函数声明为虚函数，就可以通过父类指针来释放子类对象，从而完成子类的一些清理工作，防止出现内存泄漏。
带有纯虚函数的类为抽象类，不能被实例化，只能被子类继承，所以当我们设计一个基类为抽象类时，可以把析构函数声明为纯虚析构函数，这样基类就是抽象类了。
注意：纯虚析构函数也要有函数体，用来做一些基类的清理工作，防止基类出现内存泄漏。
